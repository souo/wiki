"use strict";(self.webpackChunkdev_wiki=self.webpackChunkdev_wiki||[]).push([[6995],{3905:(e,t,i)=>{i.d(t,{Zo:()=>c,kt:()=>k});var r=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function o(e,t){if(null==e)return{};var i,r,a=function(e,t){if(null==e)return{};var i,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)i=l[r],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)i=l[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):n(n({},t),e)),i},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var i=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(i),k=a,h=u["".concat(s,".").concat(k)]||u[k]||g[k]||l;return i?r.createElement(h,n(n({ref:t},c),{},{components:i})):r.createElement(h,n({ref:t},c))}));function k(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=i.length,n=new Array(l);n[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,n[1]=o;for(var p=2;p<l;p++)n[p]=i[p];return r.createElement.apply(null,n)}return r.createElement.apply(null,i)}u.displayName="MDXCreateElement"},920:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>n,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var r=i(7462),a=(i(7294),i(3905));const l={title:"\u6df1\u5165\u7406\u89e3HBase\u67b6\u6784",id:"hbase-architecture"},n="Apache HBase \u67b6\u6784\u7684\u597d\u5904",o={unversionedId:"bigdata/hbase/hbase-architecture",id:"bigdata/hbase/hbase-architecture",title:"\u6df1\u5165\u7406\u89e3HBase\u67b6\u6784",description:"HBase \u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a",source:"@site/docs/bigdata/hbase/ hbase_architecture.md",sourceDirName:"bigdata/hbase",slug:"/bigdata/hbase/hbase-architecture",permalink:"/wiki/docs/bigdata/hbase/hbase-architecture",draft:!1,tags:[],version:"current",frontMatter:{title:"\u6df1\u5165\u7406\u89e3HBase\u67b6\u6784",id:"hbase-architecture"},sidebar:"docs",previous:{title:"\u7d22\u5f15\u7684\u5931\u6548\u4e0e\u4f18\u5316",permalink:"/wiki/docs/db/profiling/"},next:{title:"hadoop \u6027\u80fd\u4f18\u5316",permalink:"/wiki/docs/bigdata/hadoop/hadoop-tuning"}},s={},p=[{value:"\u6b65\u9aa4\u4e00",id:"\u6b65\u9aa4\u4e00",level:2},{value:"\u6b65\u9aa4\u4e8c",id:"\u6b65\u9aa4\u4e8c",level:2},{value:"MemStore",id:"memstore",level:2},{value:"Region Flush",id:"region-flush",level:2},{value:"HFile \u7ed3\u6784",id:"hfile-\u7ed3\u6784",level:2},{value:"HFile Index",id:"hfile-index",level:2},{value:"Minor Compaction",id:"minor-compaction",level:2},{value:"Major Compaction",id:"major-compaction",level:2},{value:"\u6570\u636e\u6062\u590d",id:"\u6570\u636e\u6062\u590d",level:2}],c={toc:p};function g(e){let{components:t,...l}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"apache-hbase-\u67b6\u6784\u7684\u597d\u5904"},"Apache HBase \u67b6\u6784\u7684\u597d\u5904"),(0,a.kt)("p",null,"HBase \u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5f3a\u4e00\u81f4\u6027\u6a21\u578b",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u5f53\u5199\u5165\u8fd4\u56de\u65f6\uff0c\u6240\u6709\u8bfb\u8005\u90fd\u4f1a\u770b\u5230\u76f8\u540c\u7684\u503c"))),(0,a.kt)("li",{parentName:"ul"},"\u81ea\u52a8\u7f29\u653e",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u6570\u636e\u589e\u957f\u8fc7\u5927\u65f6 Region \u5206\u88c2"),(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528 HDFS \u4f20\u64ad\u548c\u590d\u5236\u6570\u636e"))),(0,a.kt)("li",{parentName:"ul"},"\u5185\u7f6e\u6062\u590d",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528 Write Ahead Log\uff08\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u65e5\u8bb0\u529f\u80fd\uff09"))),(0,a.kt)("li",{parentName:"ul"},"\u4e0e Hadoop \u96c6\u6210",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"HBase \u4e0a\u7684 MapReduce \u975e\u5e38\u7b80\u5355")))),(0,a.kt)("h1",{id:"hbase-\u67b6\u6784\u7ec4\u6210"},"HBase \u67b6\u6784\u7ec4\u6210"),(0,a.kt)("p",null,"HBase \u91c7\u7528 Master/Slave \u67b6\u6784, \u7531 Region servers\u3001Master\u3001Zookeeeper \u4e09\u4e2a\u7ec4\u5efa\u6784\u6210\u3002"),(0,a.kt)("p",null,"Region servers \u4e3a\u8bfb\u53d6\u548c\u5199\u5165\u63d0\u4f9b\u6570\u636e\u3002 \u8bbf\u95ee\u6570\u636e\u65f6\uff0c\u5ba2\u6237\u7aef\u76f4\u63a5\u4e0e HBase RegionServers \u901a\u4fe1\u3002\nHBase Master \u8d1f\u8d23 region \u5206\u914d\uff0cDDL\uff08\u521b\u5efa\uff0c\u5220\u9664\u8868\uff09\u64cd\u4f5c\u3002\nZookeeper \u662f HDFS \u7684\u4e00\u90e8\u5206\uff0c\u8d1f\u8d23\u5b9e\u65f6\u7ef4\u62a4\u96c6\u7fa4\u72b6\u6001\u3002"),(0,a.kt)("p",null,"Hadoop DataNode \u5b58\u50a8 Region Server \u7ba1\u7406\u7684\u6570\u636e\u3002 \u6240\u6709 HBase \u6570\u636e\u90fd\u5b58\u50a8\u5728 HDFS \u6587\u4ef6\u4e2d\u3002 Region servers \u4e0e HDFS DataNode \u5171\u540c\u5de5\u4f5c\uff0c\u540e\u8005\u652f\u6301 RegionServers \u670d\u52a1\u7684\u6570\u636e\u672c\u5730\u6027\uff08\u5c06\u6570\u636e\u653e\u5728\u9700\u8981\u7684\u4f4d\u7f6e\u9644\u8fd1\uff09\u3002 HBase \u6570\u636e\u5728\u5199\u5165\u65f6\u662f\u672c\u5730\u6570\u636e\uff0c\u4f46\u662f\u5f53\u79fb\u52a8\u67d0\u4e2a region \u65f6\uff0c\u5b83\u5728 compaction.\u4e4b\u524d\u4e0d\u662f\u672c\u5730\u7684\u3002"),(0,a.kt)("p",null,"NameNode \u7ef4\u62a4\u7ec4\u6210\u6587\u4ef6\u7684\u6240\u6709\u7269\u7406\u6570\u636e\u5757\u7684\u5143\u6570\u636e\u4fe1\u606f\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(5360).Z,width:"632",height:"343"})),(0,a.kt)("h1",{id:"regions"},"Regions"),(0,a.kt)("p",null,'HBase \u8868\u6309 row key \u6c34\u5e73\u5206\u4e3a"region"\u3002"region"\u5305\u542b\u8868\u4e2d\u4ece region \u7684\u5f00\u59cb\u952e\u548c\u7ed3\u675f\u952e\u4e4b\u95f4\u7684\u7684\u6240\u6709\u884c\u3002 region \u88ab\u5206\u914d\u7ed9\u96c6\u7fa4\u4e2d\u7684\u8282\u70b9\uff0c\u79f0\u4e3a\u201cRegion Server\u201d\uff0c\u5b83\u4eec\u4e3a\u8bfb\u53d6\u548c\u5199\u5165\u63d0\u4f9b\u6570\u636e\u3002 egion Server \u53ef\u4ee5\u670d\u52a1\u5927\u7ea6 1,000 \u4e2a region\u3002'),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(7960).Z,width:"724",height:"337"})),(0,a.kt)("h1",{id:"hbase-hmaster"},"HBase HMaster"),(0,a.kt)("p",null,"Master \u8d1f\u8d23\uff1a"),(0,a.kt)("p",null,"\u534f\u8c03 Region server"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5728\u542f\u52a8\u65f6\u5206\u914d Region\uff0c\u91cd\u65b0\u5206\u914d Region \u4ee5\u8fdb\u884c\u6062\u590d\u6216\u8d1f\u8f7d\u5e73\u8861"),(0,a.kt)("li",{parentName:"ul"},"\u76d1\u63a7\u96c6\u7fa4\u4e2d\u7684\u6240\u6709 RegionServer \u5b9e\u4f8b\uff08\u4fa6\u542c\u6765\u81ea zookeeper \u7684\u901a\u77e5\uff09")),(0,a.kt)("p",null,"\u7ba1\u7406\u529f\u80fd"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u521b\u5efa\uff0c\u5220\u9664\uff0c\u66f4\u65b0\u8868\u7684\u63a5\u53e3")),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(9884).Z,width:"722",height:"367"})),(0,a.kt)("h1",{id:"zookeeper-\u534f\u8c03\u8005"},"zookeeper: \u534f\u8c03\u8005"),(0,a.kt)("p",null,"HBase \u4f7f\u7528 ZooKeeper \u4f5c\u4e3a\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u6765\u7ef4\u62a4\u96c6\u7fa4\u4e2d\u7684\u670d\u52a1\u5668\u72b6\u6001\u3002Zookeeper \u7ef4\u62a4\u54ea\u4e9b\u670d\u52a1\u5668\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u4e14\u53ef\u7528\uff0c\u5e76\u63d0\u4f9b\u670d\u52a1\u5668\u6545\u969c\u901a\u77e5\u3002 Zookeeper \u4f7f\u7528\u5171\u8bc6\u6765\u4fdd\u8bc1\u5171\u540c\u7684\u5171\u4eab\u72b6\u6001\u3002 \u8bf7\u6ce8\u610f\uff0c\u5e94\u8be5\u6709\u4e09\u5230\u4e94\u53f0\u673a\u5668\u8fbe\u6210\u5171\u8bc6\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(2009).Z,width:"703",height:"318"})),(0,a.kt)("h1",{id:"\u8fd9\u4e9b\u7ec4\u4ef6\u5982\u4f55\u4e00\u8d77\u5de5\u4f5c"},"\u8fd9\u4e9b\u7ec4\u4ef6\u5982\u4f55\u4e00\u8d77\u5de5\u4f5c"),(0,a.kt)("p",null,"Zookeeper \u7528\u4e8e\u534f\u8c03\u5206\u5e03\u5f0f\u7cfb\u7edf\u7ec4\u4ef6\u7684\u5171\u4eab\u72b6\u6001\u4fe1\u606f\u3002 Region Server \u548c\u6d3b\u52a8 HMaster \u8fde\u63a5\u5230 ZooKeeper \u7684\u4f1a\u8bdd\u3002 ZooKeeper \u901a\u8fc7\u5fc3\u8df3\u7ef4\u62a4\u6d3b\u52a8\u4f1a\u8bdd\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(7306).Z,width:"722",height:"329"})),(0,a.kt)("p",null,"\u6bcf\u4e2a Region Server \u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a ephemeral \u8282\u70b9\u3002 HMaster \u76d1\u89c6\u8fd9\u4e9b\u8282\u70b9\u4ee5\u53d1\u73b0\u53ef\u7528\u7684 Region Server\uff0c\n\u5e76\u4e14\u8fd8\u76d1\u89c6\u8fd9\u4e9b\u8282\u70b9\u4e3a\u4e86\u6545\u969c\u53d1\u73b0\u3002"),(0,a.kt)("p",null,"HMasters \u4e89\u76f8\u521b\u5efa\u4e00\u4e2a ephemeral \u7684\u8282\u70b9\u3002 Zookeeper \u786e\u5b9a\u7b2c\u4e00\u4e2a\u5e76\u4f7f\u7528\u5b83\u6765\u786e\u4fdd\u53ea\u6709\u4e00\u4e2a\u4e3b\u670d\u52a1\u5668\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002 \u6d3b\u52a8 HMaster \u5c06\u5fc3\u8df3\u53d1\u9001\u5230 Zookeeper\uff0c\u975e\u6d3b\u52a8 HMaster \u76d1\u542c\u6d3b\u52a8 HMaster \u6545\u969c\u7684\u901a\u77e5\u3002"),(0,a.kt)("p",null,"\u5982\u679c Region Server \u6216\u6d3b\u52a8 HMaster \u672a\u80fd\u53d1\u9001\u5fc3\u8df3\uff0c\u5219\u4f1a\u8bdd\u8fc7\u671f\u5e76\u5220\u9664\u76f8\u5e94\u7684 ephemeral \u8282\u70b9\u3002 \u5c06\u901a\u77e5\u5df2\u5220\u9664\u8282\u70b9\u7684\u66f4\u65b0\u4fa6\u542c\u5668\u3002 \u6d3b\u52a8 HMaster \u4fa6\u542c Region Server\uff0c\u5e76\u5728\u5931\u8d25\u65f6\u6062\u590d Region Server\u3002 \u975e\u6d3b\u52a8 HMaster \u76d1\u542c\u6d3b\u52a8 HMaster \u6545\u969c\uff0c\u5982\u679c\u6d3b\u52a8 HMaster \u5931\u8d25\uff0c\u5219\u975e\u6d3b\u52a8 HMaster \u53d8\u4e3a\u6d3b\u52a8\u72b6\u6001\u3002"),(0,a.kt)("h1",{id:"hbase-\u7684\u7b2c\u4e00\u6b21\u8bfb\u5199"},"HBase \u7684\u7b2c\u4e00\u6b21\u8bfb\u5199"),(0,a.kt)("p",null,"\u6709\u4e00\u4e2a\u540d\u4e3a hbase:meta \u8868\u7684\u7279\u6b8a HBase Catalog \u8868\uff0c\u5b83\u4fdd\u5b58\u96c6\u7fa4\u4e2d\u533a\u57df\u7684\u4f4d\u7f6e\u3002 ZooKeeper \u5b58\u50a8 hbase:meta \u8868\u7684\u4f4d\u7f6e\u3002"),(0,a.kt)("p",null,"hbase:meta \u8868\u7684\u7ed3\u6784\u5982\u4e0b\uff1a"),(0,a.kt)("p",null,"key: (","[table]",",","[region start key]",",","[region id]",")"),(0,a.kt)("p",null,"value:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"info:regioninfo (region \u7684\u5e8f\u5217\u5316 HRegionInfo \u5b9e\u4f8b)"),(0,a.kt)("li",{parentName:"ul"},"info:server (\u670d\u52a1\u5668\uff1a\u5305\u542b\u6b64 region \u7684 RegionServer \u7684\u7aef\u53e3)"),(0,a.kt)("li",{parentName:"ul"},"info:serverstartcode \u5305\u542b\u6b64 region \u7684 RegionServer \u8fdb\u7a0b\u7684\u5f00\u59cb\u65f6\u95f4)")),(0,a.kt)("p",null,"\u5f53\u8868\u5904\u4e8e split \u8fc7\u7a0b\u4e2d\u65f6\uff0c\u5c06\u521b\u5efa\u53e6\u5916\u4e24\u5217\uff0c\u79f0\u4e3a info\uff1asplitA \u548c info\uff1asplitB\u3002 \u8fd9\u4e9b\u5217\u4ee3\u8868\u4e24\u4e2a\u5b50 region\u3002 \u8fd9\u4e9b\u5217\u7684\u503c\u4e5f\u662f\u5e8f\u5217\u5316\u7684 HRegionInfo \u5b9e\u4f8b\u3002 region split \u540e\uff0c\u6700\u7ec8\u5c06\u5220\u9664\u6b64\u884c\u3002"),(0,a.kt)("p",null,"\u8fd9\u662f client \u7b2c\u4e00\u6b21\u8bfb\u53d6\u6216\u5199\u5165 HBase \u65f6\u53d1\u751f\u7684\u60c5\u51b5\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u4ece ZooKeeper \u83b7\u53d6 hbase:meta \u8868\u6240\u5728\u7684 Region serve\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5ba2\u6237\u7aef\u6839\u636e table \u548c rowkey \u67e5\u8be2 hbase:meta \u8868\u83b7\u53d6\u5bf9\u5e94\u7684 Region server\u3002 \u5ba2\u6237\u7aef\u5c06\u6b64\u4fe1\u606f\u4e0e hbase:meta \u8868\u4f4d\u7f6e\u4e00\u8d77\u7f13\u5b58\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4ece\u76f8\u5e94\u7684 Region Server \u83b7\u53d6 Row\u3002"))),(0,a.kt)("p",null,"\u4e4b\u540e\u7684\u8bfb\u53d6\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528\u7f13\u5b58\u6765\u68c0\u7d22 hbase:meta \u4f4d\u7f6e\u548c\u5148\u524d\u8bfb\u53d6\u7684\u884c\u952e\u3002 \u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\uff0c\u5b83\u4e0d\u9700\u8981\u67e5\u8be2 hbase:meta \u8868\uff0c\u9664\u975e\u7531\u4e8e region \u5df2\u79fb\u52a8\u800c\u5bfc\u81f4\u672a\u547d\u4e2d; \u7136\u540e\u5b83\u5c06\u91cd\u65b0\u67e5\u8be2\u548c\u66f4\u65b0\u7f13\u5b58\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(1250).Z,width:"590",height:"356"}),")"),(0,a.kt)("h1",{id:"region-server-\u7ec4\u4ef6"},"Region Server \u7ec4\u4ef6"),(0,a.kt)("p",null,"Region Serve \u5728 HDFSDataNode \u4e0a\u8fd0\u884c\uff0c\u5e76\u5177\u6709\u4ee5\u4e0b\u7ec4\u4ef6\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"WAL\uff1aWrite Ahead Log \u662f\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\u4e0a\u7684\u6587\u4ef6\u3002 WAL \u7528\u4e8e\u5b58\u50a8\u5c1a\u672a\u6301\u4e45\u5b58\u50a8\u5230\u6c38\u4e45\u5b58\u50a8\u7684\u65b0\u6570\u636e; \u5b83\u7528\u4e8e\u5728\u53d1\u751f\u6545\u969c\u65f6\u8fdb\u884c\u6062\u590d\u3002"),(0,a.kt)("li",{parentName:"ul"},"BlockCache\uff1a\u662f\u8bfb\u7f13\u5b58\u3002 \u5b83\u5c06\u9891\u7e41\u8bfb\u53d6\u7684\u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\u3002 LRU \u7f13\u5b58\u7b56\u7565\u3002"),(0,a.kt)("li",{parentName:"ul"},"MemStore\uff1a\u662f\u5199\u7f13\u5b58\u3002 \u5b83\u5b58\u50a8\u5c1a\u672a\u5199\u5165\u78c1\u76d8\u7684\u65b0\u6570\u636e\u3002 \u5728\u5199\u5165\u78c1\u76d8\u4e4b\u524d\u5bf9\u5176\u8fdb\u884c\u6392\u5e8f\u3002 \u6bcf\u4e2a region \u6bcf\u4e2a\u5217\u65cf\u6709\u4e00\u4e2a MemStore\u3002"),(0,a.kt)("li",{parentName:"ul"},"Hfiles\uff1a\u5c06 row \u5b58\u50a8\u4e3a\u78c1\u76d8\u4e0a\u7684\u6392\u5e8f KeyValues\u3002")),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(1030).Z,width:"675",height:"366"})),(0,a.kt)("h1",{id:"hbase-\u5199\u6b65\u9aa4"},"hbase \u5199\u6b65\u9aa4"),(0,a.kt)("h2",{id:"\u6b65\u9aa4\u4e00"},"\u6b65\u9aa4\u4e00"),(0,a.kt)("p",null,"\u5f53\u5ba2\u6237\u7aef\u53d1\u51fa Put \u8bf7\u6c42\u65f6\uff0c\u7b2c\u4e00\u6b65\u662f\u5c06\u6570\u636e\u5199\u5165\u9884\u5199\u65e5\u5fd7 WAL\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u66f4\u6539\u8ffd\u52a0\u5230\u5230\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684 WAL \u6587\u4ef6\u7684\u672b\u5c3e\u3002"),(0,a.kt)("li",{parentName:"ul"},"WAL \u7528\u4e8e\u5728\u670d\u52a1\u5668\u5d29\u6e83\u65f6\u6062\u590d\u5c1a\u672a\u4fdd\u7559\u7684\u6570\u636e\u3002")),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(4801).Z,width:"716",height:"363"})),(0,a.kt)("h2",{id:"\u6b65\u9aa4\u4e8c"},"\u6b65\u9aa4\u4e8c"),(0,a.kt)("p",null,"\u4e00\u65e6\u5c06\u6570\u636e\u5199\u5165 WAL \u540e\uff0c\u5c06\u5176\u653e\u5165 MemStore \u4e2d\u3002\u7136\u540e\uff0c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef put \u8bf7\u6c42\u786e\u8ba4\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(3179).Z,width:"664",height:"298"})),(0,a.kt)("h2",{id:"memstore"},"MemStore"),(0,a.kt)("p",null,"MemStore \u5c06\u66f4\u65b0\u4f5c\u4e3a\u5df2\u6392\u5e8f\u7684 KeyValues \u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4e0e\u5c06\u5b58\u50a8\u5728 HFile \u4e2d\u7684\u4fdd\u6301\u76f8\u540c\u3002 \u6bcf\u4e2a CF\uff08column family\uff09\u6709\u4e00\u4e2a MemStore\u3002 \u66f4\u65b0\u6309\u7167 CF \u6392\u5e8f\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(6987).Z,width:"719",height:"351"})),(0,a.kt)("h2",{id:"region-flush"},"Region Flush"),(0,a.kt)("p",null,"\u5f53 MemStore \u7d2f\u79ef\u8db3\u591f\u7684\u6570\u636e\u65f6\uff0c\u6574\u4e2a\u6709\u5e8f\u96c6\u5408\u5c06\u88ab\u5199\u5165 HDFS \u4e2d\u7684\u65b0 HFile \u4e2d\u3002"),(0,a.kt)("p",null,"HBase \u6bcf\u4e2a CF \u4f7f\u7528\u591a\u4e2a HFile\uff0c\u5176\u4e2d\u5305\u542b\u5b9e\u9645\u7684\u5355\u5143\u683c\u6216 KeyValue \u5b9e\u4f8b\u3002 \u8fd9\u4e9b\u6587\u4ef6\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u800c\u521b\u5efa\uff0c\u56e0\u4e3a\u5728 MemStores \u4e2d\u6392\u5e8f\u7684 KeyValue \u5c06\u4f5c\u4e3a\u6587\u4ef6\u5237\u65b0\u5230\u78c1\u76d8\u3002"),(0,a.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u8fd9\u662f HBase \u4e2d\u5217\u65cf\u6570\u9650\u5236\u7684\u4e00\u4e2a\u539f\u56e0\u3002 \u6bcf\u4e2a CF \u6709\u4e00\u4e2a MemStore; \u5f53\u5176\u4e2d\u4e00\u4e2a\u6ee1\u5458\u65f6\uff0c\u4ed6\u4eec\u90fd\u4f1a flush\u3002"),(0,a.kt)("p",null,"\u5b83\u8fd8\u4fdd\u5b58\u4e86\u6700\u540e\u5199\u5165\u7684\u5e8f\u5217\u53f7\uff0c\u4ee5\u4fbf\u7cfb\u7edf\u77e5\u9053\u5230\u76ee\u524d\u4e3a\u6b62\u6301\u4e45\u5316\u7684\u5185\u5bb9\u3002\u6700\u9ad8\u5e8f\u5217\u53f7\u5b58\u50a8\u4e3a\u6bcf\u4e2a HFile \u4e2d\u7684\u5143\u5b57\u6bb5\uff0c\u4ee5\u53cd\u6620\u6301\u4e45\u5316\u5df2\u7ed3\u675f\u7684\u4f4d\u7f6e\u548c\u7ee7\u7eed\u7684\u4f4d\u7f6e\u3002 \u5728 region \u542f\u52a8\u65f6\uff0c\u8bfb\u53d6\u5e8f\u5217\u53f7\uff0c\u5e76\u5c06\u6700\u9ad8\u503c\u7528\u4f5c\u65b0\u7f16\u8f91\u7684\u5e8f\u5217\u53f7\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(1604).Z,width:"622",height:"248"})),(0,a.kt)("p",null,"HFile\ndescription:\npublished: true\ndate: 2021-01-15T08:33:57.512Z\ntags:\neditor: undefined\ndateCreated: 2021-01-15T08:21:32.834Z"),(0,a.kt)("hr",null),(0,a.kt)("h1",{id:"hfile"},"Hfile"),(0,a.kt)("p",null,"\u6570\u636e\u5b58\u50a8\u5728 HFile \u4e2d\uff0c\u5176\u4e2d\u5305\u542b\u5df2\u6392\u5e8f\u7684\u952e/\u503c\u3002 \u5f53 MemStore \u7d2f\u79ef\u8db3\u591f\u7684\u6570\u636e\u65f6\uff0c\u6574\u4e2a\u5df2\u6392\u5e8f\u7684 KeyValue \u96c6\u5c06\u5199\u5165 HDFS \u4e2d\u7684\u65b0 HFile\u3002 \u8fd9\u662f\u4e00\u4e2a\u987a\u5e8f\u5199\u3002 \u5b83\u975e\u5e38\u5feb\uff0c\u56e0\u4e3a\u5b83\u907f\u514d\u4e86\u78c1\u76d8\u9a71\u52a8\u5668\u5934\u7684\u79fb\u52a8\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(7905).Z,width:"698",height:"351"})),(0,a.kt)("h2",{id:"hfile-\u7ed3\u6784"},"HFile \u7ed3\u6784"),(0,a.kt)("p",null,"Hfile \u7684\u5b58\u50a8\u683c\u5f0f\u8be6\u60c5",(0,a.kt)("a",{parentName:"p",href:"https://hbase.apache.org/book.html#_hfile_format_2"},"\u70b9\u8fd9\u91cc\u67e5\u770b")),(0,a.kt)("p",null,"HFile \u5305\u542b\u4e00\u4e2a\u591a\u5c42\u7d22\u5f15\uff0c\u5141\u8bb8 HBase \u5728\u4e0d\u5fc5\u8bfb\u53d6\u6574\u4e2a\u6587\u4ef6\u7684\u60c5\u51b5\u4e0b\u67e5\u627e\u6570\u636e\u3002 \u591a\u7ea7\u7d22\u5f15\u5c31\u50cf\u4e00\u4e2a b+\u6811\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u952e\u503c\u5bf9\u6309\u9012\u589e\u987a\u5e8f\u5b58\u50a8"),(0,a.kt)("li",{parentName:"ul"},"\u5728 64KB\u201c\u5757\u201d\u4e2d\u7684\u7d22\u5f15\u901a\u8fc7 rowkey \u6307\u5411\u952e\u503c\u5bf9\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u5757\u90fd\u6709\u81ea\u5df1\u7684\u53f6\u7d22\u5f15"),(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u5757\u7684\u6700\u540e\u4e00\u4e2a\u952e\u653e\u5728\u4e2d\u95f4\u7d22\u5f15\u4e2d"),(0,a.kt)("li",{parentName:"ul"},"\u6839\u7d22\u5f15\u6307\u5411\u4e2d\u95f4\u7d22\u5f15")),(0,a.kt)("p",null,"Trailer \u6709\u6307\u5411 meta \u5757\u7684\u6307\u9488\u3002\u5b83\u662f\u5728\u6301\u4e45\u5316\u6570\u636e\u5230\u6587\u4ef6\u7ed3\u675f\u65f6\u5199\u5165\u7684\uff0cTrailer \u8fd8\u5305\u542b\u5e03\u9686\u8fc7\u6ee4\u5668\u548c\u65f6\u95f4\u8303\u56f4\u4fe1\u606f\u7b49\u4fe1\u606f\u3002 Bloom \u8fc7\u6ee4\u5668\u6709\u52a9\u4e8e\u8df3\u8fc7\u4e0d\u5305\u542b\u67d0\u4e2a\u884c\u952e\u7684\u6587\u4ef6\u3002 \u5982\u679c\u6587\u4ef6\u4e0d\u5728\u8bfb\u53d6\u7684\u65f6\u95f4\u8303\u56f4\u5185\uff0c\u5219\u65f6\u95f4\u8303\u56f4\u4fe1\u606f\u5bf9\u4e8e\u8df3\u8fc7\u6587\u4ef6\u5f88\u6709\u7528\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(3957).Z,width:"688",height:"349"})),(0,a.kt)("h2",{id:"hfile-index"},"HFile Index"),(0,a.kt)("p",null,"\u5728 Hfile \u88ab\u6253\u5f00\u65f6\u7d22\u5f15\u88ab\u52a0\u8f7d\u5230\u5185\u5b58"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(7249).Z,width:"772",height:"341"})),(0,a.kt)("h1",{id:"hbase-\u8bfb\u5408\u5e76"},"hbase \u8bfb\u5408\u5e76"),(0,a.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u770b\u5230\u4e00\u884c\u7684 KeyValue \u5355\u5143\u683c\u53ef\u4ee5\u5728\u591a\u4e2a\u4f4d\u7f6e\uff0c\u5df2\u7ecf\u6301\u4e45\u5316\u7684\u884c\u5355\u5143\u5728 Hfiles \u4e2d\uff0c\u6700\u8fd1\u66f4\u65b0\u7684\u5355\u5143\u5728 MemStore \u4e2d\uff0c\u5e76\u4e14\u6700\u8fd1\u8bfb\u53d6\u7684\u5355\u5143\u5728 block cache \u4e2d\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5\u5f53\u4f60\u8bfb\u4e00\u884c\u65f6\uff0c\u7cfb\u7edf\u5982\u4f55\u83b7\u5f97\u76f8\u5e94\u7684\u5355\u5143\u683c\u8fd4\u56de\uff1f Read \u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u5408\u5e76 block cache\uff0cMemStore \u548c HFiles \u4e2d\u7684\u952e\u503c\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u9996\u5148\uff0cscanner \u5728 Block cache \u4e2d\u67e5\u627e\u884c\u5355\u5143\u683c - \u8bfb\u7f13\u5b58, \u6700\u8fd1\u8bfb\u53d6\u952e\u503c\u5728\u6b64\u5904\u7f13\u5b58\uff0c\u5e76\u4e14\u5728\u9700\u8981\u5185\u5b58\u65f6\u5c06\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684\u503c\u6e05\u9664\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u63a5\u4e0b\u6765\uff0cscanner \u5728 memStore \u4e2d\u67e5\u627e\uff0c\u5185\u5b58\u4e2d\u7684\u5199\u5165\u7f13\u5b58\u5305\u542b\u6700\u8fd1\u5199\u5165\u7684\u5355\u5143\u683c\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c scanner \u6ca1\u6709\u627e\u5230 MemStore \u548c Block Cache \u4e2d\u7684\u6240\u6709\u884c\u5355\u5143\u683c\uff0c\u90a3\u4e48 HBase \u5c06\u4f7f\u7528 Block Cache \u7d22\u5f15\u548c bloom \u8fc7\u6ee4\u5668\u5c06 HFiles \u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u8be5\u5185\u5b58\u53ef\u80fd\u5305\u542b\u76ee\u6807\u884c\u5355\u5143\u683c")),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(578).Z,width:"769",height:"278"})),(0,a.kt)("p",null,"\u5982\u524d\u6240\u8ff0\uff0c\u6bcf\u4e2a MemStore \u53ef\u80fd\u6709\u8bb8\u591a HFile\uff0c\u8fd9\u610f\u5473\u7740\u5bf9\u4e8e\u8bfb\u53d6\uff0c\u53ef\u80fd\u5fc5\u987b\u68c0\u67e5\u591a\u4e2a\u6587\u4ef6\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd\u3002 \u8fd9\u79f0\u4e3a\u8bfb\u653e\u5927\uff08read amplification\uff09\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(9594).Z,width:"596",height:"307"})),(0,a.kt)("h1",{id:"minor--major-compaction"},"Minor & Major Compaction"),(0,a.kt)("h2",{id:"minor-compaction"},"Minor Compaction"),(0,a.kt)("p",null,"HBase \u5c06\u81ea\u52a8\u9009\u62e9\u4e00\u4e9b\u8f83\u5c0f\u7684 HFile \u5e76\u5c06\u5176\u91cd\u5199\u4e3a\u66f4\u5c11\u7684\u66f4\u5927\u7684 Hfiles\u3002 \u6b64\u8fc7\u7a0b\u79f0\u4e3a Minor Compaction\u3002Minor Compaction \u901a\u8fc7\u5c06\u8f83\u5c0f\u7684\u6587\u4ef6\u91cd\u5199\u4e3a\u8f83\u5c11\u4f46\u8f83\u5927\u7684\u6587\u4ef6\u6765\u6267\u884c\u5408\u5e76\u6392\u5e8f\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5b58\u50a8\u6587\u4ef6\u7684\u6570\u91cf\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(7107).Z,width:"723",height:"329"})),(0,a.kt)("h2",{id:"major-compaction"},"Major Compaction"),(0,a.kt)("p",null,"Major Compaction \u5c06 Region \u4e2d\u7684\u6240\u6709 HFile \u5408\u5e76\u5e76\u91cd\u5199\u4e3a\u6bcf CF \u4e00\u4e2a HFile\uff0c\u5e76\u5728\u6b64\u8fc7\u7a0b\u4e2d\u5220\u9664\u5df2\u5220\u9664\u6216\u5df2\u8fc7\u671f\u7684\u5355\u5143\u683c\u3002 \u8fd9\u63d0\u9ad8\u4e86\u8bfb\u53d6\u6027\u80fd;"),(0,a.kt)("p",null,"\u4f46\u662f\uff0c\u7531\u4e8e Major Compaction \u91cd\u5199\u6240\u6709\u6587\u4ef6\uff0c\u56e0\u6b64\u5728\u6b64\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4f1a\u53d1\u751f\u5927\u91cf\u78c1\u76d8 I / O \u548c\u7f51\u7edc\u6d41\u91cf\u3002 \u8fd9\u79f0\u4e3a\u5199\u5165\u653e\u5927\u3002"),(0,a.kt)("p",null,"\u7531\u4e8e\u5199\u5165\u653e\u5927\uff0cMajor Compaction \u901a\u5e38\u5b89\u6392\u5728\u5468\u672b\u6216\u665a\u4e0a\u8fd0\u884c\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(6628).Z,width:"653",height:"339"})),(0,a.kt)("h1",{id:"region-\u7b49\u4e8e\u8fde\u7eed\u7684-key"},"Region \u7b49\u4e8e\u8fde\u7eed\u7684 key"),(0,a.kt)("p",null,"\u8ba9\u6211\u4eec\u5feb\u901f\u56de\u987e\u4e00\u4e0b region\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u8868\u53ef\u4ee5\u6c34\u5e73\u5212\u5206\u4e3a\u4e00\u4e2a\u6216\u591a\u4e2a region\u3002 region \u5305\u542b\u5f00\u59cb\u952e\u548c\u7ed3\u675f\u952e\u4e4b\u95f4\u7684\u8fde\u7eed\u6392\u5e8f\u884c\u8303\u56f4"),(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u533a\u57df\u7684\u5927\u5c0f\u4e3a 1GB\uff08\u9ed8\u8ba4,\u53ef\u4ee5\u8bbe\u7f6e\uff09"),(0,a.kt)("li",{parentName:"ul"},"TableServer \u7684\u4e00\u4e2a region \u7531 RegionServer \u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef"),(0,a.kt)("li",{parentName:"ul"},"RegionServer \u53ef\u4ee5\u670d\u52a1\u5927\u7ea6 1,000 \u4e2a region\uff08\u53ef\u80fd\u5c5e\u4e8e\u540c\u4e00\u4e2a\u8868\u6216\u4e0d\u540c\u7684\u8868\uff09")),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(8771).Z,width:"653",height:"334"})),(0,a.kt)("h1",{id:"region-split"},"Region Split"),(0,a.kt)("p",null,"\u6700\u521d\u6bcf\u4e2a\u8868\u6709\u4e00\u4e2a region\u3002 \u5f53\u4e00\u4e2a region \u53d8\u5f97\u592a\u5927\u65f6\uff0c\u5b83\u4f1a\u5206\u88c2\u6210\u4e24\u4e2a\u5b50 region\u3002 \u4e24\u4e2a\u5b50 region\uff08\u4ee3\u8868\u539f\u59cb region \u7684\u4e00\u534a\uff09\u5728\u540c\u4e00\u4e2a Region server \u4e0a\u5e76\u884c\u6253\u5f00\uff0c\u7136\u540e\u5c06 split \u62a5\u544a\u7ed9 HMaster\u3002 \u51fa\u4e8e\u8d1f\u8f7d\u5e73\u8861\u7684\u539f\u56e0\uff0cHMaster \u53ef\u4ee5\u5b89\u6392\u5c06\u65b0 region \u79fb\u5230\u5176\u4ed6\u670d\u52a1\u5668\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(1469).Z,width:"675",height:"361"})),(0,a.kt)("h1",{id:"\u8bfb\u8d1f\u8f7d\u5e73\u8861"},"\u8bfb\u8d1f\u8f7d\u5e73\u8861"),(0,a.kt)("p",null,"split \u6700\u521d\u53d1\u751f\u5728\u540c\u4e00\u4e2a Region Server \u4e0a\uff0c\u4f46\u51fa\u4e8e\u8d1f\u8f7d\u5e73\u8861\u7684\u539f\u56e0\uff0cHMaster \u53ef\u80fd\u4f1a\u5b89\u6392\u5c06\u65b0 Region \u79fb\u5230\u5176\u4ed6\u670d\u52a1\u5668\u4e0a\u3002"),(0,a.kt)("p",null,"\u8fd9\u5bfc\u81f4\u65b0\u7684 Region server \u4ece\u8fdc\u7a0b HDFS \u8282\u70b9\u63d0\u4f9b\u6570\u636e\uff0c\u76f4\u5230 major compaction \u5c06\u6570\u636e\u6587\u4ef6\u79fb\u52a8\u5230 Region Server \u7684\u672c\u5730\u8282\u70b9\u3002 HBase \u6570\u636e\u5728\u5199\u5165\u65f6\u662f\u672c\u5730\u6570\u636e\uff0c\u4f46\u662f\u5f53\u79fb\u52a8\u67d0\u4e2a region\uff08\u7528\u4e8e\u8d1f\u8f7d\u5e73\u8861\u6216\u6062\u590d\uff09\u65f6\uff0c\u5b83\u5728 major compaction \u4e4b\u524d\u4e0d\u662f\u672c\u5730\u7684\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(3975).Z,width:"714",height:"358"})),(0,a.kt)("h1",{id:"hdfs-data-replication"},"HDFS Data Replication"),(0,a.kt)("p",null,"\u6240\u6709\u5199\u5165\u548c\u8bfb\u53d6\u90fd\u662f\u6765\u81ea\u4e3b\u8282\u70b9\u3002 HDFS \u590d\u5236 WAL \u548c HFile \u5757\u3002 HFile \u5757\u590d\u5236\u81ea\u52a8\u53d1\u751f\u3002 HBase \u4f9d\u8d56 HDFS \u5728\u5b58\u50a8\u6587\u4ef6\u65f6\u63d0\u4f9b\u6570\u636e\u5b89\u5168\u6027\u3002 \u5728 HDFS \u4e2d\u5199\u5165\u6570\u636e\u65f6\uff0c\u672c\u5730\u5199\u5165\u4e00\u4e2a\u526f\u672c\uff0c\u7136\u540e\u5c06\u5176\u590d\u5236\u5230\u7b2c\u4e8c\u4e2a\u8282\u70b9\uff0c\u5c06\u7b2c\u4e09\u4e2a\u526f\u672c\u5199\u5165\u7b2c\u4e09\u4e2a\u8282\u70b9\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(9897).Z,width:"641",height:"302"})),(0,a.kt)("p",null,"WAL \u6587\u4ef6\u548c Hfiles \u4f1a\u6301\u4e45\u4fdd\u5b58\u5728\u78c1\u76d8\u4e0a\u5e76\u8fdb\u884c\u590d\u5236\uff0c\u90a3\u4e48 HBase \u5982\u4f55\u6062\u590d\u672a\u6301\u4e45\u4fdd\u5b58\u5230 HFiles \u4e2d\u7684 MemStore \u66f4\u65b0\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(4835).Z,width:"679",height:"349"})),(0,a.kt)("h1",{id:"hbase-\u5d29\u6e83\u6062\u590d"},"HBase \u5d29\u6e83\u6062\u590d"),(0,a.kt)("p",null,"\u5f53 RegionServer \u53d1\u751f\u6545\u969c\u65f6\uff0c\u5d29\u6e83 Region \u5c06\u4e0d\u53ef\u7528\uff0c\u76f4\u5230\u68c0\u6d4b\u548c\u6062\u590d\u6b65\u9aa4\u53d1\u751f\u3002"),(0,a.kt)("p",null,"\u5f53 Zookeeper \u5931\u53bb RegionServer \u5fc3\u8df3\u65f6\uff0c\u5b83\u5c06\u786e\u5b9a\u8282\u70b9\u5931\u8d25\u3002 \u7136\u540e\uff0cHMaster \u5c06\u88ab\u901a\u77e5 Region Server \u5df2\u5931\u8d25\u3002"),(0,a.kt)("p",null,"\u5f53 HMaster \u68c0\u6d4b\u5230 RegionServer \u5df2\u5d29\u6e83\u65f6\uff0cHMaster \u4f1a\u5c06\u5d29\u6e83\u7684 RegionServer \u4e2d\u7684 Region \u91cd\u65b0\u5206\u914d\u7ed9\u6d3b\u52a8\u7684 Region server\u3002"),(0,a.kt)("p",null,"\u4e3a\u4e86\u6062\u590d\u672a\u5237\u65b0\u5230\u78c1\u76d8\u7684\u5d29\u6e83 Region server \u7684 memstore \u66f4\u65b0\u3002 HMaster \u5c06\u5c5e\u4e8e\u5d29\u6e83 Region server \u7684 WAL \u62c6\u5206\u4e3a\u5355\u72ec\u7684\u6587\u4ef6\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6587\u4ef6\u5b58\u50a8\u5728\u65b0\u7684 Region Server \u7684\u6570\u636e\u8282\u70b9\u4e2d\u3002 \u7136\u540e\uff0c\u6bcf\u4e2a Region Server \u4ece\u76f8\u5e94\u7684\u62c6\u5206 WAL \u91cd\u653e WAL\uff0c\u4ee5\u91cd\u5efa\u8be5 region \u7684 memstore\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(9457).Z,width:"708",height:"368"})),(0,a.kt)("h2",{id:"\u6570\u636e\u6062\u590d"},"\u6570\u636e\u6062\u590d"),(0,a.kt)("p",null,"WAL \u6587\u4ef6\u5305\u542b\u7f16\u8f91\u5217\u8868\uff0c\u5176\u4e2d\u4e00\u4e2a\u7f16\u8f91\u8868\u793a\u5355\u4e2a put \u6216 delete\u3002 \u7f16\u8f91\u6309\u65f6\u95f4\u987a\u5e8f\u7f16\u5199\uff0c\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6301\u4e45\u6027\uff0c\u6dfb\u52a0\u5185\u5bb9\u4f1a\u9644\u52a0\u5230\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\u7684 WAL \u6587\u4ef6\u7684\u672b\u5c3e\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u6570\u636e\u4ecd\u7136\u5728\u5185\u5b58\u4e2d\u5e76\u4e14\u6ca1\u6709\u6301\u4e45\u4fdd\u5b58\u5230 HFile \u65f6\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f WAL \u88ab\u91cd\u64ad\u3002 \u901a\u8fc7\u8bfb\u53d6 WAL\uff0c\u5c06\u5305\u542b\u7684\u7f16\u8f91\u6dfb\u52a0\u5e76\u6392\u5e8f\u5230\u5f53\u524d\u7684 MemStore \u6765\u91cd\u653e WAL\u3002 \u6700\u540e\uff0cMemStore \u5237\u65b0\u4ee5\u5199\u5165\u5bf9 HFile \u7684\u66f4\u6539\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{src:i(4047).Z,width:"724",height:"378"})))}g.isMDXComponent=!0},5360:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig1-13163402febac7942b4f6da64ba0247b.png"},3179:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig10-560c39000ea012db4c64ee2718d24705.png"},6987:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig11-f613bc772b24ecb355b8c1f4f9f93571.png"},1604:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig12-8fa9e738fede5bf79040211484e6f520.png"},7905:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig13-bf4eacb3b3ffd5d791419771cd424d48.png"},3957:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig14-e4a9a775187cb83f4a4d5e6086427478.png"},7249:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig15-f2dce0b0c999c5bdd968fbc55cbf1cb0.png"},578:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig16-4d3d6e7645e822aaab0fb13de3641d18.png"},9594:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig17-94b8bb389d581d230d96080c183a0051.png"},7107:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig18-d731a340c1e3f3d4e8ee57ee30b60b1b.png"},6628:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig19-911939a05247d1758ebc752979f89bad.png"},7960:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig2-7f724f8e977a9771043d42448fbe98d1.png"},8771:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig20-b16f794aa867ee10e9cc653139b4f172.png"},1469:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig21-05d95a19f7cd7befdabad07fa3fb3543.png"},3975:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig22-b78560c1b66c47fad8dd50a43d8764c2.png"},9897:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig23-e174118ce3ee63fd878b52c5ae2985d1.png"},4835:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig24-a297014c153da6c99a19e298732cd145.png"},9457:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig25-e85c62c3578020360aa4fa96f675c833.png"},4047:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig26-e6ef17bbf348dd967c66efff766608d2.png"},9884:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig3-70369082156473f77859312e431e2125.png"},2009:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig4-5076ead98f45597928ff3d61151004a8.png"},7306:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig5-b0b77481aa8ad7b9896c732160262784.png"},1250:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig6-da85ba359e878cb1d15dd70689cd9485.png"},1030:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig8-c2ae045ff8f08c9fa260948c28ccdf32.png"},4801:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/HBaseArchitecture-Blog-Fig9-8abac7bf9ccc7395d068eae76b9c993a.png"}}]);